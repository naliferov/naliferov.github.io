import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{aJ as v,o as f,bi as _,at as x,r as p,aB as s,a$ as g,aH as b,F as h,aL as w,p as S}from"./runtime-core.esm-bundler-CYxvy_wc.js";const B={__name:"purrDataNode",props:{name:String,id:String,output:String,valueName:String},setup(c){const r=c,a=v(null),e=f(()=>purrData[r.id]),i=f(()=>{const t=e.value.input;return t?purrData[t]:null});_(i,t=>{t&&(e.value.ref=t.ref+" -- cust V")},{deep:!0,immediate:!0}),x(()=>{const t=e.value.params;t&&(a.value.style.position="absolute",a.value.style.top=t.top,a.value.style.left=t.left)});const d=t=>{dnd.activate(t,a.value,()=>{e.value.params||(e.value.params={}),e.value.params.left=a.value.style.left,e.value.params.top=a.value.style.top})},o=t=>{t.key==="Enter"&&t.preventDefault()},y=t=>{if(t.key!=="Enter")return;const u=a.value.textContent.trim();if(u.startsWith(":")){const D=u.split(":")[1],[n,...k]=D.split(" ");if(n==="a"&&(purrData[$.ulid()]={ref:"new node"}),n==="d"&&delete purrData[r.id],n==="l"&&console.log(r.id,e.value),n==="linkadd"){const[l]=k;if(!l||!purrData[l])return;e.value.input=l.trim()}n==="linkdel"&&delete e.value.input;return}i.value||(e.value.ref=u)};return(t,u)=>(s(),p("div",{ref_key:"dom",ref:a,style:{border:"1px solid","min-width":"100px",position:"absolute"},contenteditable:"plaintext-only",onKeydown:o,onKeyup:y,onPointerdown:d},g(e.value.ref),545))}},K=m(B,[["__scopeId","data-v-205ab3ae"]]),E={__name:"purrData",setup(c){const r=v(null),a=b({});return _(a,()=>{},{deep:!0}),(e,i)=>(s(),p("div",{ref_key:"dom",ref:r,style:{position:"absolute",background:"#f3f3f3","min-width":"250px","min-height":"250px"}},[(s(!0),p(h,null,w(a,(d,o)=>(s(),S(K,{key:o,id:o},null,8,["id"]))),128))],512))}},F=m(E,[["__scopeId","data-v-b74c26f1"]]);export{F as default};
